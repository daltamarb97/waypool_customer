{"version":3,"sources":["../../src/pages/p-createcrew/createcrew.module.ts","../../src/pages/p-createcrew/createcrew.ts"],"names":[],"mappings":"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","file":"41.js","sourcesContent":["\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CreateCrewPage } from './createcrew';\n \n@NgModule({\n  declarations: [\n    CreateCrewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CreateCrewPage),\n  ],\n  exports: [\n    CreateCrewPage\n  ]\n})\nexport class CreateCrewPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p-createcrew/createcrew.module.ts","import { Component } from '@angular/core';\nimport { NavController, ViewController, NavParams, ToastController, IonicPage, AlertController } from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { SignUpService } from '../../services/signup.services';\nimport { sendCoordsService } from '../../services/sendCoords.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { sendUsersService } from '../../services/sendUsers.service';\nimport { geofireService } from '../../services/geoFire.service';\nimport { instancesService } from '../../services/instances.service';\nimport { Subject, onErrorResumeNext } from 'rxjs';\n\n@IonicPage()\n\n@Component({\n  selector: 'page-createcrew',\n  templateUrl: 'createcrew.html'\n})\nexport class CreateCrewPage {\n\n  startHour:any;\n  userId:any;\n  origin:any;\n  destination:any;\n  latOr:any;\n  lngOr:any;\n  latDest:any;\n  lngDest:any;\n  admin = {};\n  constructor(public navCtrl: NavController, public sendUsersService:sendUsersService,public toastCtrl: ToastController,public viewCtrl: ViewController,private afDB: AngularFireDatabase, public SignUpService: SignUpService, public sendCoordsService: sendCoordsService,public navParams: NavParams,public AngularFireAuth: AngularFireAuth, private geoFireService: geofireService, public instances: instancesService, public alertCtrl: AlertController) {\n      this.userId = this.AngularFireAuth.auth.currentUser.uid;\n\n      // Getting info for creating crew in DB\n      this.afDB.database.ref('/usersTest/' + this.userId).once('value').then((snap)=>{\n        if(snap.val()){\n          this.admin = {\n            city: snap.val().city,\n            comapny: snap.val().company,\n            name: snap.val().name,\n            lastname: snap.val().lastname,\n            phone: snap.val().phone,\n            userId: snap.val().userId,\n            verifiedPerson: snap.val().verifiedPerson,\n          }\n          this.origin = snap.val().trips.origin[0]\n          this.destination = snap.val().trips.destination[0]\n\n        }\n        \n      })\n\n\n\n    this.latOr = this.navParams.get('latOr');\n    this.lngOr = this.navParams.get('lngOr');\n    this.latDest = this.navParams.get('latDest');\n    this.lngDest = this.navParams.get('lngDest');\n  }\n\n\n  dismiss(){\n    this.viewCtrl.dismiss();\n  }\n\n  setCrew(){\n\n    if(this.startHour === undefined){\n      let alert = this.alertCtrl.create({\n        title: 'Por favor confirma la hora a la que iniciarÃ­a este viaje',\n        buttons: ['OK']\n      }); \n      alert.present();\n    }else{\n\n      //AQUI QUEDE\n      this.afDB.database.ref('/crewsTest/' + this.userId).push({\n        admin: this.admin,\n        destination: {\n          name: this.destination,\n          coords: {\n            lat: this.latDest,\n            lng: this.lngDest\n          }\n        },\n        origin: {\n          name: this.origin,\n          coords: {\n            lat: this.latOr,\n            lng: this.lngOr\n          }\n        },\n      }).then((snap)=>{\n\n        this.afDB.database.ref('/crewsTest/' + this.userId + '/' + snap.key).update({\n          crewId: snap.key\n        })\n        \n      }).then(()=>{\n\n        let alert = this.alertCtrl.create({\n          title: 'Eres ahora administrador de el grupo que acabaste de crear',\n          buttons: ['OK']\n        }); \n        alert.present();\n        this.viewCtrl.dismiss();\n      })\n    }\n    \n  }\n\n \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/p-createcrew/createcrew.ts"],"sourceRoot":""}