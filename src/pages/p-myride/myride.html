<ion-header class="bg-theme">
    <ion-navbar hideBackButton="true">
        <ion-title class="text-center">MI VIAJE</ion-title>
    </ion-navbar>
    
</ion-header>

<ion-content class="bg-light">
    <p class="important">Â¡IMPORTANTE!: No cierres la app mientras estas haciendo un viaje. </p> 

    <div>
        <ion-list>
            <ion-card *ngFor = "let user of pendingUsers">
                <ion-item>
                    <ion-avatar item-start>
                        <img src="assets/imgs/userPicture.png">
                    </ion-avatar>
                    <div class="name">
                        <h2 *ngIf="user.userId === userUid; else itsNotMeBlock "> Yo
                            <ion-icon name="ios-checkmark-circle" class="text-theme"></ion-icon>
                        </h2>
                        <ng-template #itsNotMeBlock >
                            <h2 >{{user.name | titlecase}} {{user.lastname |titlecase | slice:0:1}}
                                <ion-icon *ngIf='user.verifiedPerson' name="ios-checkmark-circle" class="text-theme"></ion-icon>
                            </h2>
                            <p>{{user.place}}</p>

                        </ng-template>
                        
                    </div>                   
                    <div class="more">
                        <ion-badge class="bg-yellow">EN ESPERA</ion-badge>
                    </div>
                </ion-item>
                
            </ion-card>
            <ion-card *ngFor = "let user of pickedUpUsers">
                <ion-item>
                    <ion-avatar item-start>
                        <img src="assets/imgs/userPicture.png">
                    </ion-avatar>
                    <div class="name">
                        <h2 *ngIf="user.userId === userUid; else itsNotMeBlock " style="font-size:1.5rem; "> Yo
                            <ion-icon name="ios-checkmark-circle" class="text-green"></ion-icon>
                        </h2>
                        <ng-template #itsNotMeBlock >
                            <h2 >{{user.name | titlecase}} {{user.lastname |titlecase | slice:0:1}}
                                <ion-icon *ngIf='user.verifiedPerson' name="ios-checkmark-circle" class="text-green"></ion-icon>                           
                            </h2>
                            <p>{{user.place}}</p>

                        </ng-template>
                        
                    </div>
                    <div class="more">
                        <ion-badge class="bg-green">RECOGIDO</ion-badge>  
                    </div>
                   
                </ion-item>
                
            </ion-card>

            <!-- repilica -->
            <ion-card *ngIf="driverExist">
                <ion-item>
                    <ion-avatar item-start>
                        <img  style="height:70px; width: 70px;" src="assets/imgs/carBlue.png">
                    </ion-avatar>
                    <div class="name">
                        <h2>{{trip.driver.name|titlecase}} {{trip.driver.lastname |titlecase | slice:0:1}}
                            <ion-icon *ngIf='trip.driver.verifiedPerson' name="ios-checkmark-circle" class="text-theme"></ion-icon>
                            <ion-badge class="bg-yellow" style="margin:0px 3px 13px;"> {{trip.driver.place}}</ion-badge>

                        </h2>
                        <p>{{trip.car}}</p>

                    </div>
                    <div class="more">
                        <h2 class="text-theme" class="priceDriver">$ {{trip.price}}
                        </h2>
                    </div>                
                   
                </ion-item>
                <ion-card-content>
                    <div class="ride-detail">
                        <p>
                            <span class="icon-location bg-theme"></span>{{trip.houseAddr}}</p>
                        <p>
                            <span class="icon-location bg-yellow"></span>{{trip.placeAddr}}</p>
                    </div>
                    <ion-row>
                      
                            <h2 class="text text-theme" style=" display: flex; align-items: center; font-weight:600">                        
                                Hora de partida: {{trip.startHour}}                          
                            </h2>                    
                          
                       
                            <ion-col class="detail-text">
                                <button class="btn bg-green rounded full text-white" style="    width: 44px;
                                font-size: 21px;" (click)="callUser(trip.driver.phone)"><ion-icon name="ios-call" class="text-white"></ion-icon></button>

                            </ion-col>
                      
                   
                    </ion-row>
                </ion-card-content>
            </ion-card>    
            <ion-row class="rowOfButtons" >                                 
                
                <ion-col class="detail-text">
                    <button class="btn bg-darkblue rounded full text-white" style="width: 90%;margin-top: 14px;margin-left: 9px;" (click)="enterChat()">Chat</button>
                </ion-col>
                <ion-col class="detail-text">
                    <button  class="btn bg-theme text-white rounded" *ngIf="onTrip"  (click)="cancelTrip()"style="width: 90%;margin-top: 14px;margin-left: 9px; margin-right:9px;">Cancelar Viaje</button>
                </ion-col>
           
            </ion-row>

        </ion-list>

        <!-- <div *ngSwitchCase="'map'">
           <div #map id="map" ></div>
        </div> -->
             

        
    </div>
</ion-content>
