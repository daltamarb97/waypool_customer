{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/login/login.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SignupPage } from './signup';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    SignupPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SignupPage),\r\n  ],\r\n  exports: [\r\n    SignupPage\r\n  ]\r\n})\r\nexport class SignupPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\r\nimport { NavController, AlertController, NavParams, IonicPage } from 'ionic-angular';\r\n\r\n\r\nimport { authenticationService } from '../../services/userauthentication.service';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { SignUpService } from '../../services/signup.services';\r\n\r\n\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html'\r\n})\r\nexport class LoginPage {\r\n\r\n    email:string = '';\r\n    password:string = null;\r\n    auth = this.AngularFireAuth.auth;\r\n    receivedUser;\r\n    \r\n  constructor(public navCtrl: NavController, private authenticationService: authenticationService, public alertCtrl: AlertController, private AngularFireAuth: AngularFireAuth, public NavParams: NavParams, private SignUpService: SignUpService) {\r\n\r\n\r\n  }\r\n  \r\n    signup(){\r\n        this.navCtrl.push('SignupPage');\r\n    }\r\n\r\n    resetPassword(email:string){\r\n                    if(this.email == ''){\r\n                        const alert = this.alertCtrl.create({\r\n                            title: 'no hay ningun email',\r\n                            subTitle: 'ingresa un email para resetear tu contraseña',\r\n                            buttons: ['OK']\r\n                          });\r\n                          alert.present();\r\n                          console.log(\"reset password email hasn't been sent\");\r\n                    }else{\r\n                        this.auth.sendPasswordResetEmail(this.email);\r\n                        const alert = this.alertCtrl.create({\r\n                            title: 'revisa tu email',\r\n                            subTitle: 'un correo te ha sido enviado para resetear tu contraseña',\r\n                            buttons: ['OK']\r\n                          });\r\n                          alert.present(); \r\n                        console.log(\"reset password email has been sent\");\r\n                     }; \r\n                };\r\n            \r\n        \r\n        \r\n    \r\n    logIn(){\r\n        this.receivedUser = this.NavParams.data;\r\n        this.authenticationService.loginWithEmail(this.email, this.password).then((data) => {\r\n            console.log(data);\r\n            if(data.user.emailVerified == false){\r\n                const alert = this.alertCtrl.create({\r\n                    title: 'Oops!',\r\n                    subTitle: 'por favor verifica tu email',\r\n                    buttons: ['OK']\r\n                  });\r\n                  alert.present();  \r\n            }else{\r\n                let metadata = this.auth.currentUser.metadata;\r\n                if(metadata.creationTime == metadata.lastSignInTime){\r\n                    console.log(metadata.creationTime);\r\n                    console.log(metadata.lastSignInTime);\r\n\r\n                    this.navCtrl.push('TabsPage');//aqui va registration car, no tabspge\r\n\r\n                }else{\r\n                    this.navCtrl.push('TabsPage');\r\n                }\r\n                this.authenticationService.getStatus;  \r\n            };\r\n        }).catch((error) => {\r\n            const alert = this.alertCtrl.create({\r\n                title: 'Oops!',\r\n                subTitle: 'El usuario o la contraseña están incorrectas',\r\n                buttons: ['OK']\r\n              });\r\n              alert.present();\r\n            console.log(error);\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","\r\nimport { Component, ViewChild } from '@angular/core';\r\n\r\n\r\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\r\nimport { LoginPage } from '../login/login';\r\n\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport { authenticationService } from '../../services/userauthentication.service';\r\nimport { SignUpService } from '../../services/signup.services';\r\nimport { AlertController } from 'ionic-angular';\r\nimport { Content } from 'ionic-angular';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport * as firebase from 'firebase';\r\n\r\n\r\n\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-signup',\r\n  templateUrl: 'signup.html'\r\n})\r\nexport class SignupPage {\r\n\r\n    @ViewChild(Content) content: Content;\r\n    user:any ={};\r\n    tokenId:any = '';\r\n    userId:any = '';\r\n    isReadonly = true;\r\n    private signupGroup: FormGroup;\r\n\r\n    // userFirebase = this.AngularFireAuth.auth.currentUser;\r\n\r\n  constructor(public navCtrl: NavController, private afDB: AngularFireDatabase, private formBuilder: FormBuilder, private authenticationService: authenticationService, private SignUpService: SignUpService, public  alertCtrl: AlertController, private AngularFireAuth: AngularFireAuth, public navParams: NavParams) {\r\n    this.signupGroup = this.formBuilder.group({\r\n        name: [\"\", Validators.required],\r\n        lastname: [\"\", Validators.required],\r\n        email: [\"\", Validators.required],\r\n        fixedemail: [\"\"],\r\n        password: [\"\", Validators.required],\r\n        passwordconf: [\"\", Validators.required],\r\n        phone: [\"\", Validators.required],\r\n        carModel: [\"\", Validators.required],\r\n        plateNumber: [\"\", Validators.required]\r\n        \r\n    })\r\n  }\r\n    scrolling(){\r\n        this.content.scrollTo(30, 0);\r\n    };\r\n\r\n\r\n    login(){\r\n        this.navCtrl.push(LoginPage);\r\n    }\r\n     \r\n    verification(){\r\n\r\n          //creating user on firebase\r\n          let userName = this.signupGroup.controls['name'].value;\r\n          let userLastName = this.signupGroup.controls['lastname'].value;\r\n          let userEmail = this.signupGroup.controls['email'].value \r\n          let userFixedemail = this.signupGroup.controls['fixedemail'].value;\r\n          let userEmailComplete = userEmail + userFixedemail;\r\n          let userPassword = this.signupGroup.controls['password'].value;\r\n          let userPasswordconf = this.signupGroup.controls['passwordconf'].value;\r\n          let userPhone = this.signupGroup.controls['phone'].value;\r\n          let userCarModel = this.signupGroup.controls['carModel'].value;\r\n          let userPlateNumber = this.signupGroup.controls['plateNumber'].value;\r\n          this.user = this.signupGroup.value;\r\n          if(userPassword === userPasswordconf){\r\n            this.authenticationService.registerWithEmail(userEmailComplete, userPassword);\r\n            this.navCtrl.push('LoginPage', this.user);\r\n        \r\n            if(!this.user.userId){\r\n                this.AngularFireAuth.auth.onAuthStateChanged((user)=>{\r\n                    if(user){\r\n                               user.getIdToken().then((token)=>{\r\n                               this.user.tokenId = token;\r\n                               console.log(this.user.tokenId);\r\n                            })\r\n                         if(!this.user.userId){\r\n                            this.user.userId = user.uid;\r\n                            console.log(this.user.userId); //remember to delete this console.log for safety reasons\r\n                        }\r\n                        this.SignUpService.saveUser(this.user);\r\n                    }else{\r\n                        console.log('there is no user');\r\n                    }\r\n                })\r\n            };\r\n\r\n            // sending email verification and verifying weather email is verified or not\r\n            this.AngularFireAuth.auth.onAuthStateChanged((user)=>{\r\n                if(user){\r\n                    if(user.emailVerified == false){\r\n                        user.sendEmailVerification();\r\n                    console.log(\"verification email has been sent\");\r\n                    }else{\r\n                        console.log(\"verification email has not been sent or the email is already verifyied\");\r\n                    }\r\n                }else{\r\n                    console.log('there is no user');\r\n                }\r\n            })  \r\n\r\n               \r\n        }else{\r\n            const alert = this.alertCtrl.create({\r\n                title: 'Oops!',\r\n                subTitle: 'las contraseñas no coinciden, intenta de nuevo',\r\n                buttons: ['OK']\r\n              });\r\n              alert.present();\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}