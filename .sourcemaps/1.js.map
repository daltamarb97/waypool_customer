{"version":3,"sources":["../../src/pages/listride/listride.module.ts","../../node_modules/angularfire2/database/index.js","../../src/pages/listride/listride.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ListridePage } from './listride';\r\n \r\n@NgModule({\r\n  declarations: [\r\n    ListridePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ListridePage),\r\n  ],\r\n  exports: [\r\n    ListridePage\r\n  ]\r\n})\r\nexport class ListridePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listride/listride.module.ts","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"@angular/fire/database\"));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi93cmFwcGVyL3NyYy9kYXRhYmFzZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDRDQUF1QyJ9\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/angularfire2/database/index.js\n// module id = 524\n// module chunks = 1 2 3","import { Component } from '@angular/core';\r\nimport { NavController, ModalController, ToastController, IonicPage } from 'ionic-angular';\r\n\r\nimport { AngularFireDatabase, AngularFireList} from 'angularfire2/database';\r\nimport { sendCoordsService } from '../../services/sendCoords.service';\r\nimport { SignUpService } from '../../services/signup.services';\r\nimport { ConfirmpopupPage } from '../confirmpopup/confirmpopup';\r\nimport { geofireService } from '../../services/geoFire.service';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\n@IonicPage()\r\n\r\n@Component({\r\n  selector: 'page-listride',\r\n  templateUrl: 'listride.html'\r\n})\r\nexport class ListridePage {\r\n  driversAvailable:any = [];\r\n\r\n  locationOrigin:any =[];\r\n  locationOriginUser:any =[];\r\n  locationDestination:any =[];\r\n  locationDestinationUser:any =[];\r\n  user:any;\r\n  userUid=this.AngularFireAuth.auth.currentUser.uid;\r\n\r\n  constructor(public navCtrl: NavController,public toastCtrl: ToastController,  private AngularFireAuth: AngularFireAuth,private afDB: AngularFireDatabase, public SignUpService: SignUpService, public sendCoordsService: sendCoordsService,public modalCtrl: ModalController, private geoFireService: geofireService ) {\r\n       \r\n    this.SignUpService.getMyInfo(this.userUid).subscribe(user=>{\r\n      this.user = user;\r\n      \r\n    })\r\n\r\n        this.sendCoordsService.getOrigin(this.userUid)\r\n        .subscribe( origin => {\r\n          this.locationOrigin = origin;\r\n          // this.locationOrigin.push(origin)\r\n          console.log(origin);\r\n        })\r\n        this.sendCoordsService.getOriginUser(this.userUid)\r\n        .subscribe( originUser => {\r\n          this.locationOriginUser = originUser;\r\n          // this.locationOrigin.push(origin)\r\n          console.log(originUser);\r\n        })\r\n      \r\n      this.sendCoordsService.getDestination(this.userUid)\r\n        .subscribe( destination => {\r\n          this.locationDestination = destination;\r\n          // this.locationOrigin.push(origin)\r\n          console.log(destination);\r\n        })\r\n\r\n        this.sendCoordsService.getDestinationUser(this.userUid)\r\n        .subscribe( destinationUser => {\r\n          this.locationDestinationUser = destinationUser;\r\n          // this.locationOrigin.push(origin)\r\n          console.log(destinationUser);\r\n        })\r\n    // this.SignUpService.getDrivers()\r\n    //   .subscribe(driver => {\r\n    //     this.driversAvailable = driver;\r\n    //     console.log(this.driversAvailable);\r\n        \r\n    //   });\r\n\r\n     \r\n  };\r\n\r\n\r\n\r\nionViewDidLoad(){\r\n  this.geoFireService.getDriversAvailableForUser(this.userUid)\r\n    .subscribe(drivers=>{\r\n        this.driversAvailable = drivers;\r\n        console.log(this.driversAvailable);\r\n    })\r\n}\r\n\r\n\r\n \r\n showToastWithCloseButton(noteDriver,nameDriver) {\r\n   if(noteDriver == ''|| noteDriver == null) {\r\n    const toast = this.toastCtrl.create({\r\n      message: `${nameDriver}: No hay nota`,\r\n      duration:1500,\r\n      position:'bottom'\r\n    });\r\n    toast.present();\r\n   \r\n   } else {\r\n    const toast = this.toastCtrl.create({\r\n      message: `${nameDriver} : ${noteDriver}`,\r\n      showCloseButton: true,\r\n      closeButtonText: 'Ok'\r\n    });\r\n    toast.present();\r\n   }\r\n  \r\n}\r\n confirmpopup(driver){\r\n  if(this.user.trips.onTrip == true || this.user.trips.pickedUp == true){\r\n    // this.geoFireService.deleteDriverListRideTotal(this.userUid);\r\n    this.geoFireService.deleteDriverListRideTotal(this.userUid);\r\n    const toast = this.toastCtrl.create({\r\n      message: `${this.user.name} : No puedes escoger otro conductor mientras estes en un viaje, por favor dirígete a Mi Viaje y cancelalo. `,\r\n      showCloseButton: true,\r\n      closeButtonText: 'Ok'\r\n    });\r\n    toast.present();\r\n  } else {\r\n\r\n let modal = this.modalCtrl.create('ConfirmpopupPage',{driver});\r\n modal.present();\r\n console.log(driver)\r\n  }\r\n \r\n  }\r\n  help(){\r\n    const toast = this.toastCtrl.create({\r\n      message: 'Aquí te saldrán los estudiantes con carro, escoge con cuál quieres compartir tu viaje y espera a que te acepte para poder comunicarte con el.',\r\n      showCloseButton:true,\r\n      closeButtonText: 'OK',\r\n      position:'top'\r\n         });\r\n    toast.present();\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listride/listride.ts"],"sourceRoot":""}